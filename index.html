// Adicionei esta função para verificar a senha antes de abrir o modal
clearBtn.addEventListener('click', async () => {
  const senha = prompt("Digite a senha para limpar placares:");
  if (senha === "bagsecreta123") {
    openClearModal();
  } else {
    alert("Senha incorreta!");
  }
});

// Modifiquei a função startQuiz para bloquear por IP
async function startQuiz() {
  const name = playerNameInput.value.trim();
  if (!name) {
    alert('Digite seu nome para começar.');
    return;
  }

  currentPlayerIP = await getUserIP();
  if (!currentPlayerIP) {
    alert('Não foi possível verificar seu IP. Tente novamente.');
    return;
  }

  // Verifica se IP já jogou
  const ipRef = ref(db, 'ips/' + currentPlayerIP);
  const ipSnap = await get(ipRef);
  if (ipSnap.exists()) {
    alert('Você só pode jogar uma vez!');
    return;
  }

  // Restante da função continua igual...
  currentPlayerName = name;
  document.getElementById('intro').classList.add('hidden');
  document.getElementById('quiz').classList.remove('hidden');
  currentQuestionIndex = 0;
  showQuestion(currentQuestionIndex);
  submitBtn.classList.add('hidden');
}

// Adicionei feedback ao excluir placares
clearForm.addEventListener('submit', async (e) => {
  e.preventDefault();
  const checked = [...clearForm.elements['playerToDelete']].filter(i => i.checked);
  
  if (checked.length === 0) {
    alert('Selecione ao menos um placar para excluir.');
    return;
  }

  for (const checkbox of checked) {
    await removeScore(checkbox.value);
  }
  
  modalOverlay.style.display = 'none';
  loadLeaderboard();
  alert(`${checked.length} placar(es) excluído(s)! Os jogadores poderão jogar novamente.`);
});
